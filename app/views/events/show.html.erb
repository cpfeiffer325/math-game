<%= javascript_pack_tag 'game'%>

<section class="game">
  <div class="header">
    <h1>Mad Minute Math</h1>
    <p>Hello <strong><%=@event.player.name%></strong>, I built this Math game for you :)</p>
    <div class="button-menu">
      <div>
        <%= button_to "Games", games_path, method: :get%>
      </div>
      <div>
        <%= button_to "Change Name", root_path, method: :get%>
      </div>
      <div>
        <%= button_to 'Try Again', game_events_path(@game.id), method: :post %>
      </div>
      <% unless @game.id == 1 %>
      <div>
        <%= button_to 'Previous Game', game_events_path(@game.id - 1), method: :post %>
      </div>
      <% end %>
      <% unless @game.id == @last_game %>
        <div>
          <%= button_to 'Next Game', game_events_path(@game.id + 1), method: :post %>
        </div>
      <% end %>
    </div>
    <div class="timer">0 : 00</div>
  </div>
  <div 
    data-event_id=<%=@event.id%>
    data-game_id=<%=@game.id%>
    class="gameEvent" style="visibility: none"
  >

    <%= render partial: 'event' %>

    <div class="highscores">
      <h1>Highscores</h1>
      <table>
        <thead>
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Game Time</th>
          </tr>
        </thead>
        
        <tbody>
          <% @highscores.each.with_index(1) do |highscore, index| %>
            <tr class="highscore_row">
              <td><%= index %></td>
              <td><%= highscore.player.name %></td>
              <td><%= "%02d:%02d" % [highscore.game_time / 60 % 60, highscore.game_time % 60] %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</section>
